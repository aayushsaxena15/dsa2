/home/aayush/dsa2/
os.getcwd /home/aayush/dsa2
/home/aayush/dsa2
/home/aayush/dsa2/
/home/aayush/dsa2/data/
file where imported /home/aayush/dsa2/example/test_features.py

  ('#### Model Params Dynamic loading  ##########################################',) 

  ('/home/aayush/dsa2',) 
/home/aayush/dsa2/
default:  /home/aayush/dsa2/example/test_features.py::config1

  ('#### Model Params Dynamic loading  ##########################################',) 

  ('/home/aayush/dsa2',) 
config_name config1
dir_data /home/aayush/dsa2//data/

  ({'model_pars': {'model_class': 'LGBMClassifier', 'model_pars': {'objective': 'binary', 'n_estimators': 100}, 'post_process_fun': <function config1.<locals>.post_process_fun at 0x7f6eba516d08>, 'pre_process_pars': {'y_norm_fun': <function config1.<locals>.pre_process_fun at 0x7f6eba516e18>, 'pipe_list': [{'uri': 'source/prepro.py::pd_coly', 'pars': {}, 'cols_family': 'coly', 'cols_out': 'coly', 'type': 'coly'}, {'uri': 'source/prepro.py::pd_colnum_bin', 'pars': {}, 'cols_family': 'colnum', 'cols_out': 'colnum_bin', 'type': ''}, {'uri': 'source/prepro.py::pd_colcat_bin', 'pars': {}, 'cols_family': 'colcat', 'cols_out': 'colcat_bin', 'type': ''}, {'uri': 'source/prepro.py::pd_col_genetic_transform', 'pars': {'pars_generic': {'metric': 'spearman', 'generations': 100, 'population_size': 100, 'tournament_size': 20, 'stopping_criteria': 1.0, 'const_range': (-1.0, 1.0), 'p_crossover': 0.9, 'p_subtree_mutation': 0.01, 'p_hoist_mutation': 0.01, 'p_point_mutation': 0.01, 'p_point_replace': 0.05, 'parsimony_coefficient': 0.0005, 'max_samples': 0.9, 'verbose': 1, 'random_state': 0, 'n_jobs': 4}}, 'cols_family': 'colgen', 'cols_out': 'col_genetic', 'type': 'add_coly'}]}}, 'compute_pars': {'metric_list': ['accuracy_score', 'average_precision_score']}, 'data_pars': {'n_sample': 500, 'cols_input_type': {'coly': 'Survived', 'colid': 'PassengerId', 'colcat': ['Sex', 'Embarked'], 'colnum': ['Pclass', 'Age', 'SibSp', 'Parch', 'Fare'], 'coltext': ['Name', 'Ticket'], 'coldate': [], 'colcross': ['Name', 'Sex', 'Ticket', 'Embarked', 'Pclass', 'Age', 'SibSp', 'Parch', 'Fare'], 'colgen': ['Pclass', 'Age', 'SibSp', 'Parch', 'Fare']}, 'cols_model_group': ['colnum', 'colcat_bin'], 'filter_pars': {'ymax': 2, 'ymin': -1}}, 'global_pars': {'config_path': '/home/aayush/dsa2/example/test_features.py', 'config_name': 'config1', 'path_data_preprocess': '/home/aayush/dsa2//data//input/titanic/train/', 'path_data_train': '/home/aayush/dsa2//data//input/titanic/train/', 'path_data_test': '/home/aayush/dsa2//data//input/titanic/test/', 'path_train_output': '/home/aayush/dsa2//data//output/titanic/config1/', 'path_train_model': '/home/aayush/dsa2//data//output/titanic/config1/model/', 'path_features_store': '/home/aayush/dsa2//data//output/titanic/config1/features_store/', 'path_pipeline': '/home/aayush/dsa2//data//output/titanic/config1/pipeline/', 'path_pred_data': '/home/aayush/dsa2//data//input/titanic/test/', 'path_pred_pipeline': '/home/aayush/dsa2//data//output/titanic/config1/pipeline/', 'path_pred_model': '/home/aayush/dsa2//data//output/titanic/config1/model/', 'path_pred_output': '/home/aayush/dsa2//data//output/titanic/pred_config1/', 'n_sample': 500}},) 
/home/aayush/dsa2/
os.getcwd /home/aayush/dsa2

  ('#### Model Params Dynamic loading  ###############################################',) 

  ('/home/aayush/dsa2',) 
config_name config1
dir_data /home/aayush/dsa2//data/

  ({'model_pars': {'model_class': 'LGBMClassifier', 'model_pars': {'objective': 'binary', 'n_estimators': 100}, 'post_process_fun': <function config1.<locals>.post_process_fun at 0x7f6eba516f28>, 'pre_process_pars': {'y_norm_fun': <function config1.<locals>.pre_process_fun at 0x7f6eba4bdb70>, 'pipe_list': [{'uri': 'source/prepro.py::pd_coly', 'pars': {}, 'cols_family': 'coly', 'cols_out': 'coly', 'type': 'coly'}, {'uri': 'source/prepro.py::pd_colnum_bin', 'pars': {}, 'cols_family': 'colnum', 'cols_out': 'colnum_bin', 'type': ''}, {'uri': 'source/prepro.py::pd_colcat_bin', 'pars': {}, 'cols_family': 'colcat', 'cols_out': 'colcat_bin', 'type': ''}, {'uri': 'source/prepro.py::pd_col_genetic_transform', 'pars': {'pars_generic': {'metric': 'spearman', 'generations': 100, 'population_size': 100, 'tournament_size': 20, 'stopping_criteria': 1.0, 'const_range': (-1.0, 1.0), 'p_crossover': 0.9, 'p_subtree_mutation': 0.01, 'p_hoist_mutation': 0.01, 'p_point_mutation': 0.01, 'p_point_replace': 0.05, 'parsimony_coefficient': 0.0005, 'max_samples': 0.9, 'verbose': 1, 'random_state': 0, 'n_jobs': 4}}, 'cols_family': 'colgen', 'cols_out': 'col_genetic', 'type': 'add_coly'}]}}, 'compute_pars': {'metric_list': ['accuracy_score', 'average_precision_score']}, 'data_pars': {'n_sample': 500, 'cols_input_type': {'coly': 'Survived', 'colid': 'PassengerId', 'colcat': ['Sex', 'Embarked'], 'colnum': ['Pclass', 'Age', 'SibSp', 'Parch', 'Fare'], 'coltext': ['Name', 'Ticket'], 'coldate': [], 'colcross': ['Name', 'Sex', 'Ticket', 'Embarked', 'Pclass', 'Age', 'SibSp', 'Parch', 'Fare'], 'colgen': ['Pclass', 'Age', 'SibSp', 'Parch', 'Fare']}, 'cols_model_group': ['colnum', 'colcat_bin'], 'filter_pars': {'ymax': 2, 'ymin': -1}}, 'global_pars': {'config_path': '/home/aayush/dsa2/example/test_features.py', 'config_name': 'config1', 'path_data_preprocess': '/home/aayush/dsa2//data//input/titanic/train/', 'path_data_train': '/home/aayush/dsa2//data//input/titanic/train/', 'path_data_test': '/home/aayush/dsa2//data//input/titanic/test/', 'path_train_output': '/home/aayush/dsa2//data//output/titanic/config1/', 'path_train_model': '/home/aayush/dsa2//data//output/titanic/config1/model/', 'path_features_store': '/home/aayush/dsa2//data//output/titanic/config1/features_store/', 'path_pipeline': '/home/aayush/dsa2//data//output/titanic/config1/pipeline/', 'path_pred_data': '/home/aayush/dsa2//data//input/titanic/test/', 'path_pred_pipeline': '/home/aayush/dsa2//data//output/titanic/config1/pipeline/', 'path_pred_model': '/home/aayush/dsa2//data//output/titanic/config1/model/', 'path_pred_output': '/home/aayush/dsa2//data//output/titanic/pred_config1/', 'n_sample': 500}},) 

  ('/home/aayush/dsa2//data//output/titanic/config1/',) 

  ('#### load input column family  ###################################################',) 

  ('#### Preprocess  #################################################################',) 

  ({'coly': 'Survived', 'colid': 'PassengerId', 'colcat': ['Sex', 'Embarked'], 'colnum': ['Pclass', 'Age', 'SibSp', 'Parch', 'Fare'], 'coltext': ['Name', 'Ticket'], 'coldate': [], 'colcross': ['Name', 'Sex', 'Ticket', 'Embarked', 'Pclass', 'Age', 'SibSp', 'Parch', 'Fare'], 'colgen': ['Pclass', 'Age', 'SibSp', 'Parch', 'Fare']},) 

  ('/home/aayush/dsa2//data//output/titanic/config1/pipeline/',) 

  ('/home/aayush/dsa2//data//output/titanic/config1/pipeline//colid.pkl',) 

  ('loading', 'PassengerId', '/home/aayush/dsa2//data//input/titanic/train//features.zip') 

  ('###### Load dfX target values ######################################',) 
['/home/aayush/dsa2//data//input/titanic/train/features.zip']

  ('Pool', 0) ,
  ('Pool', 1) ,
  ('dfX',                               0    ...                  890
Age                            22  ...                   32
Embarked                        S  ...                    Q
Fare                         7.25  ...                 7.75
Name      Braund, Mr. Owen Harris  ...  Dooley, Mr. Patrick

[4 rows x 891 columns]) 

  ('###### Load dfy target values ###################################',) 

  ('Pool', 0) ,
  ('Pool', 1) ,
  ('dfy',              0  1  2  3
PassengerId  1  2  3  4
Survived     0  1  1  1) 

  ('#####  coly  ###########################################################################',) 

  ('/home/aayush/dsa2',) 
/home/aayush/dsa2/
----------df----------
               Age Embarked     Fare  ... SibSp            Ticket  Survived
PassengerId                          ...                                  
1            22.0        S   7.2500  ...     1         A/5 21171         0
2            38.0        C  71.2833  ...     1          PC 17599         1
3            26.0        S   7.9250  ...     0  STON/O2. 3101282         1
4            35.0        S  53.1000  ...     1            113803         1
5            35.0        S   8.0500  ...     0            373450         0
...           ...      ...      ...  ...   ...               ...       ...
96           32.2        S   8.0500  ...     0            374910         0
97           71.0        C  34.6542  ...     0          PC 17754         0
98           23.0        C  63.3583  ...     0          PC 17759         1
99           34.0        S  23.0000  ...     0            231919         1
100          34.0        S  26.0000  ...     1            244367         0

[100 rows x 10 columns]
----------df[coly]------------ PassengerId
1      0.0
2      1.0
3      1.0
4      1.0
5      0.0
      ... 
96     0.0
97     0.0
98     1.0
99     1.0
100    0.0
Name: Survived, Length: 100, dtype: float32

  ('y_norm_fun preprocess_pars',) 
----------df----------
               Age Embarked     Fare  ... SibSp            Ticket  Survived
PassengerId                          ...                                  
1            22.0        S   7.2500  ...     1         A/5 21171       0.0
2            38.0        C  71.2833  ...     1          PC 17599       1.0
3            26.0        S   7.9250  ...     0  STON/O2. 3101282       1.0
4            35.0        S  53.1000  ...     1            113803       1.0
5            35.0        S   8.0500  ...     0            373450       0.0
...           ...      ...      ...  ...   ...               ...       ...
96           32.2        S   8.0500  ...     0            374910       0.0
97           71.0        C  34.6542  ...     0          PC 17754       0.0
98           23.0        C  63.3583  ...     0          PC 17759       1.0
99           34.0        S  23.0000  ...     0            231919       1.0
100          34.0        S  26.0000  ...     1            244367       0.0

[100 rows x 10 columns]

  ('/home/aayush/dsa2//data//output/titanic/config1/features_store//coly/features.parquet',) 

  (             Survived
PassengerId          
1                 0.0
2                 1.0
3                 1.0
4                 1.0
5                 0.0
...               ...
96                0.0
97                0.0
98                1.0
99                1.0
100               0.0

[100 rows x 1 columns], ['Survived']) 

  ('/home/aayush/dsa2//data//output/titanic/config1/pipeline//coly.pkl',) 

  ('###################', {'uri': 'source/prepro.py::pd_colnum_bin', 'pars': {}, 'cols_family': 'colnum', 'cols_out': 'colnum_bin', 'type': ''}, '##########################################################') 

  ('/home/aayush/dsa2',) 

  (None,) 

  ('### colnum Map numerics to Category bin  ###########################################',) 
Pclass
           Pclass               
             mean  max  min size
Pclass_bin                      
0             1.0  1.0  1.0   21
4             2.0  2.0  2.0   18
9             3.0  3.0  3.0   61
Age
               Age                       
              mean        max    min size
Age_bin                                  
-1       71.000000  71.000000  71.00    1
 0        3.478750   7.000000   0.83    8
 1       12.200000  14.000000   8.00    5
 2       18.776470  21.200001  15.00   17
 3       25.382353  28.500000  22.00   17
 4       32.127777  35.000000  29.00   36
 5       39.285713  42.000000  38.00    7
 6       46.666668  49.000000  45.00    3
 7       54.500000  55.000000  54.00    2
 8       58.500000  59.000000  58.00    2
 9       65.500000  66.000000  65.00    2
SibSp
          SibSp               
           mean  max  min size
SibSp_bin                     
0           0.0  0.0  0.0   59
1           1.0  1.0  1.0   27
3           2.0  2.0  2.0    3
5           3.0  3.0  3.0    6
7           4.0  4.0  4.0    3
9           5.0  5.0  5.0    2
Parch
          Parch               
           mean  max  min size
Parch_bin                     
0           0.0  0.0  0.0   77
1           1.0  1.0  1.0    9
3           2.0  2.0  2.0   11
5           3.0  3.0  3.0    1
9           5.0  5.0  5.0    2
Fare
                Fare                             
                mean         max         min size
Fare_bin                                         
-1        263.000000  263.000000  263.000000    2
 0         13.998889   31.387501    7.225000   75
 1         44.281094   56.495800   34.375000   13
 2         72.630089   83.474998   61.174999    9
 5        146.520798  146.520798  146.520798    1

  (OrderedDict([('Pclass', [0.9999, 1.2, 1.4, 1.6, 1.8, 2.0, 2.2, 2.4000000000000004, 2.6, 2.8, 3.0]), ('Age', [0.8298999833106995, 7.84699980020523, 14.863999617099761, 21.88099943399429, 28.897999250888823, 35.914999067783356, 42.93199888467788, 49.948998701572414, 56.96599851846695, 63.98299833536148, 70.99999815225601]), ('SibSp', [-0.0001, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5, 5.0]), ('Parch', [-0.0001, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5, 5.0]), ('Fare', [7.224899904632569, 32.802499294281006, 58.37999868392944, 83.95749807357788, 109.53499746322632, 135.11249685287476, 160.6899962425232, 186.26749563217163, 211.84499502182007, 237.4224944114685, 262.99999380111694])]),) 

  (['Pclass_bin', 'Age_bin', 'SibSp_bin', 'Parch_bin', 'Fare_bin'],) 

  ('/home/aayush/dsa2//data//output/titanic/config1/pipeline//colnum_binmap.pkl',) 

  ('/home/aayush/dsa2//data//output/titanic/config1/pipeline//colnum_bin.pkl',) 

  ('###################', {'uri': 'source/prepro.py::pd_colcat_bin', 'pars': {}, 'cols_family': 'colcat', 'cols_out': 'colcat_bin', 'type': ''}, '##########################################################') 

  ('/home/aayush/dsa2',) 

  ('#### Colcat to integer encoding ',) 

  (Sex         object
Embarked    object
dtype: object, {'cat_map': {'Sex': {'female': 0, 'male': 1}, 'Embarked': {'C': 0, 'Q': 1, 'S': 2}}, 'cat_map_inverse': {'Sex': {0: 'female', 1: 'male'}, 'Embarked': {0: 'C', 1: 'Q', 2: 'S'}}}) 

  ('/home/aayush/dsa2//data//output/titanic/config1/pipeline//colcat_bin_map.pkl',) 

  ('/home/aayush/dsa2//data//output/titanic/config1/pipeline//colcat_bin.pkl',) 

  ('###################', {'uri': 'source/prepro.py::pd_col_genetic_transform', 'pars': {'pars_generic': {'metric': 'spearman', 'generations': 100, 'population_size': 100, 'tournament_size': 20, 'stopping_criteria': 1.0, 'const_range': (-1.0, 1.0), 'p_crossover': 0.9, 'p_subtree_mutation': 0.01, 'p_hoist_mutation': 0.01, 'p_point_mutation': 0.01, 'p_point_replace': 0.05, 'parsimony_coefficient': 0.0005, 'max_samples': 0.9, 'verbose': 1, 'random_state': 0, 'n_jobs': 4}}, 'cols_family': 'colgen', 'cols_out': 'col_genetic', 'type': 'add_coly'}, '##########################################################') 

  ('/home/aayush/dsa2',) 

  ('add_coly genetic', 'Survived') 
    |   Population Average    |             Best Individual              |
---- ------------------------- ------------------------------------------ ----------
 Gen   Length          Fitness   Length          Fitness      OOB Fitness  Time Left
   0    12.10        0.0870213        8          0.18558         0.107371      6.80s
   1     8.60         0.162205        9         0.213329         0.509175      0.39s
   2     7.40         0.111622        1           0.1864         0.500862      0.26s
   3     1.30         0.109101        1         0.182466         0.516896      0.13s
   4     1.00         0.106331        1          0.16621          0.44197      0.00s

  ('########## Formulae ', {'gen_6_0': 'SibSp', 'gen_6_1': ' SibSp', 'gen_6_2': ' SibSp', 'gen_6_3': ' SibSp', 'gen_6_4': ' SibSp'}) 

  ('/home/aayush/dsa2//data//output/titanic/config1/pipeline//col_genetic_model.pkl',) 

  ('/home/aayush/dsa2//data//output/titanic/config1/pipeline//col_genetic.pkl',) 

  ('/home/aayush/dsa2//data//output/titanic/config1/pipeline//col_genetic_pars.pkl',) 

  ('/home/aayush/dsa2//data//output/titanic/config1/features_store//dfX/features.parquet',) 

  (             Survived  Pclass   Age  SibSp  ...  gen_6_1  gen_6_2 gen_6_3 gen_6_4
PassengerId                                 ...                                  
1                 0.0       3  22.0      1  ...      1.0      1.0     1.0     1.0
2                 1.0       1  38.0      1  ...      1.0      1.0     1.0     1.0
3                 1.0       3  26.0      0  ...      0.0      0.0     0.0     0.0
4                 1.0       1  35.0      1  ...      1.0      1.0     1.0     1.0
5                 0.0       3  35.0      0  ...      0.0      0.0     0.0     0.0
...               ...     ...   ...    ...  ...      ...      ...     ...     ...
96                0.0       3  32.2      0  ...      0.0      0.0     0.0     0.0
97                0.0       1  71.0      0  ...      0.0      0.0     0.0     0.0
98                1.0       1  23.0      0  ...      0.0      0.0     0.0     0.0
99                1.0       2  34.0      0  ...      0.0      0.0     0.0     0.0
100               0.0       2  34.0      1  ...      1.0      1.0     1.0     1.0

[100 rows x 20 columns], ['Survived', 'Pclass', 'Age', 'SibSp', 'Parch', 'Fare', 'Sex', 'Embarked', 'Pclass_bin', 'Age_bin', 'SibSp_bin', 'Parch_bin', 'Fare_bin', 'Sex_int', 'Embarked_int', 'gen_6_0', 'gen_6_1', 'gen_6_2', 'gen_6_3', 'gen_6_4']) 

  ('/home/aayush/dsa2//data//output/titanic/config1/pipeline//colsX.pkl',) 

  ('/home/aayush/dsa2//data//output/titanic/config1/pipeline//cols_family.pkl',) 

  (['Pclass', 'Age', 'SibSp', 'Parch', 'Fare', 'Pclass', 'Age', 'SibSp', 'Parch', 'Fare', 'Sex_int', 'Embarked_int'], 'Survived') 

  ('#### Save data on disk #############################',) 

  ('/home/aayush/dsa2//data//output/titanic/config1//model_dict.pkl',) 

  ('######### finish #################################',) 
